<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Actualités</title>
<style>
body { font-family: Arial, sans-serif; background: linear-gradient(#a6d6f7, #5c69d6, #0a1530); color: white; margin: 0; }
h1 { text-align: center; margin: 20px; }
#news { width: 90%; margin: auto; display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
.card { background: #222; padding: 15px; border-radius: 12px; text-align: center; }
.card img { max-width: 100%; border-radius: 8px; margin-top: 10px; }
</style>

<!-- SDK Supabase -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js"></script>
<script>
  const SUPABASE_URL = 'https://xxxxxx.supabase.co'; // Remplace par ton URL
  const SUPABASE_KEY = 'public-anon-key';           // Remplace par ta clé publique
  const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
</script>
</head>
<body>
<h1>Actualités</h1>
<div id="news"></div>

<script>
const container = document.getElementById('news');

async function loadNews() {
  const { data, error } = await supabase
    .from('actualites')
    .select('*')
    .order('created_at', { ascending: false });

  if (error) {
    container.innerHTML = `<p style="grid-column:1/3;text-align:center">Erreur : ${error.message}</p>`;
    return;
  }

  if (data.length === 0) {
    container.innerHTML = '<p style="grid-column:1/3;text-align:center">Aucune actualité pour le moment.</p>';
  } else {
    data.forEach(n => {
      const d = document.createElement('div');
      d.className = 'card';
      d.innerHTML = `<h3>${n.title}</h3><p>${n.description}</p>${n.image ? `<img src="${n.image}">` : ''}`;
      container.appendChild(d);
    });
  }
}

loadNews();
</script>
</body>
</html>
